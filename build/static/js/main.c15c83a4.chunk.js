(this["webpackJsonpphoto-app-reactjs-redux"]=this["webpackJsonpphoto-app-reactjs-redux"]||[]).push([[0],{118:function(t,e,n){},120:function(t,e,n){},121:function(t,e,n){},123:function(t,e,n){"use strict";n.r(e);var r=n(1),a=n.n(r),i=n(26),o=n.n(i),c=n(29),s=n(22),u={photos:n(38).b},p=Object(s.configureStore)({reducer:u}),d=(n(67),n(68),n(13)),l=n.n(d),h=n(19),f=n(23),m=n(55),j=n.n(m),b=n(9),g=n.n(b),x=n(56),v=n.n(x),O=function(){var t=Object(h.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=g.a.auth().currentUser)){t.next=3;break}return t.abrupt("return",e.getIdToken());case 3:if(localStorage.getItem("firebaseui::rememberedAccounts")){t.next=6;break}return t.abrupt("return",null);case 6:return t.abrupt("return",new Promise((function(t,e){var n=setTimeout((function(){e(null),console.log("Reject timeout")}),1e4),r=g.a.auth().onAuthStateChanged(function(){var a=Object(h.a)(l.a.mark((function a(i){var o;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i||e(null),a.prev=1,a.next=4,i.getIdToken();case 4:o=a.sent,console.log("[AXIOS] Logged in user token: ",o),t(o),r(),clearTimeout(n),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),console.log(a.t0);case 14:case"end":return a.stop()}}),a,null,[[1,11]])})));return function(t){return a.apply(this,arguments)}}())})));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),y=j.a.create({baseURL:"https://js-post-api.herokuapp.com/api",headers:{"content-type":"application/json"},paramsSerializer:function(t){return v.a.stringify(t)}});y.interceptors.request.use(function(){var t=Object(h.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O();case 2:return(n=t.sent)&&(e.headers.Authorization="Bearer ".concat(n)),t.abrupt("return",e);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),y.interceptors.response.use((function(t){return t&&t.data?t.data:t}),(function(t){throw t}));var I=y,k={getAll:function(t){return I.get("/products",{params:t,header:"Ha Van Kim"})}},w=n(51),S={getMe:function(){return new Promise((function(t,e){setTimeout((function(){var e=g.a.auth().currentUser;t({id:e.uid,name:e.displayName,email:e.email,photoUrl:e.photoURL})}),500)}))}},A=n(22),N=A.createSlice,_=(0,A.createAsyncThunk)("user/getMe",function(){var t=Object(h.a)(l.a.mark((function t(e,n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.getMe();case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),P=(N({name:"user",initialState:{current:{}},reducers:{},extraReducers:Object(w.a)({},_.fulfilled,(function(t,e){t.current=e.payload}))}).reducer,n(57)),U=n.n(P),L=n(124),C=(n(118),n(4)),F={signInFlow:"redirect",signInSuccessUrl:"/photos",signInOptions:[g.a.auth.GoogleAuthProvider.PROVIDER_ID]},q=function(){return g.a.auth().signOut()};var E=function(){var t=Object(r.useState)(!1),e=Object(f.a)(t,2),n=e[0],a=e[1];return Object(r.useEffect)((function(){var t=g.a.auth().onAuthStateChanged((function(t){a(!!t)}));return function(){return t()}}),[]),n?Object(C.jsxs)("div",{className:"user-profile",children:[Object(C.jsxs)("h2",{children:["Hello ",g.a.auth().currentUser.displayName]}),Object(C.jsxs)("p",{children:["Email: ",g.a.auth().currentUser.email," "]}),Object(C.jsxs)("div",{className:"user-profile__img",children:[Object(C.jsx)("p",{children:"Avatar:"}),Object(C.jsx)("img",{src:g.a.auth().currentUser.photoURL,alt:"Avatar"})]}),Object(C.jsx)(L.a,{onClick:q,children:"Logout"})]}):Object(C.jsxs)("div",{children:[Object(C.jsxs)("div",{className:"text-center",children:[Object(C.jsx)("h2",{children:"Login Form"}),Object(C.jsx)("p",{children:"or login with social accounts"})]}),Object(C.jsx)(U.a,{uiConfig:F,firebaseAuth:g.a.auth()})]})},R=n(27),T=n(8),M=(n(120),n(125)),z=n(126),D=n(127);n(121);var V=function(){var t=Object(r.useState)(!1),e=Object(f.a)(t,2),n=e[0],a=e[1];return Object(r.useEffect)((function(){var t=g.a.auth().onAuthStateChanged((function(t){a(!!t)}));return function(){return t()}}),[]),Object(C.jsx)("header",{className:"header",children:Object(C.jsx)(M.a,{children:Object(C.jsxs)(z.a,{className:"justify-content-between",children:[Object(C.jsx)(D.a,{xs:"auto",children:Object(C.jsx)("a",{className:"header__link header__title",href:"/",children:"Mars"})}),Object(C.jsx)(D.a,{xs:"auto",children:Object(C.jsx)(R.c,{exact:!0,className:"header__link",to:"/sign-in",activeClassName:"header__link--active",children:n?g.a.auth().currentUser.displayName:"Sign In"})})]})})})},B=n(54),J=a.a.lazy((function(){return Promise.all([n.e(2),n.e(4)]).then(n.bind(null,310))}));g.a.initializeApp({apiKey:"AIzaSyAgcjImah5ZwAkyq9gWz0V0ON9_Jf6nNqM",authDomain:"photo-app-143a2.firebaseapp.com"});var H=function(){var t=Object(r.useState)([]),e=Object(f.a)(t,2),n=(e[0],e[1]),a=Object(c.b)();return Object(r.useEffect)((function(){(function(){var t=Object(h.a)(l.a.mark((function t(){var e,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e={_page:1,_limit:10},t.next=4,k.getAll(e);case 4:r=t.sent,console.log(r),n(r.data),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log("Failed to fetch product list: ",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}})()()}),[]),Object(r.useEffect)((function(){var t=g.a.auth().onAuthStateChanged(function(){var t=Object(h.a)(l.a.mark((function t(e){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=3;break}return console.log("User is not logged in"),t.abrupt("return");case 3:return t.prev=3,t.next=6,a(_());case 6:n=t.sent,r=Object(s.unwrapResult)(n),console.log(n),console.log("Logged in user: ",r),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(3),console.log("Failed to login ",t.t0.message);case 15:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(e){return t.apply(this,arguments)}}());return function(){return t()}}),[]),Object(C.jsx)("div",{className:"photo-app",children:Object(C.jsx)(r.Suspense,{fallback:Object(C.jsx)("div",{children:"Loading ..."}),children:Object(C.jsxs)(R.a,{children:[Object(C.jsx)(V,{}),Object(C.jsxs)(T.d,{children:[Object(C.jsx)(T.a,{exact:!0,from:"/",to:"/photos"}),Object(C.jsx)(T.b,{path:"/photos",component:J}),Object(C.jsx)(T.b,{path:"/sign-in",component:E}),Object(C.jsx)(T.b,{component:B.a})]})]})})})},K=function(t){t&&t instanceof Function&&n.e(5).then(n.bind(null,309)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,i=e.getLCP,o=e.getTTFB;n(t),r(t),a(t),i(t),o(t)}))};o.a.render(Object(C.jsx)(c.a,{store:p,children:Object(C.jsx)(a.a.StrictMode,{children:Object(C.jsx)(H,{})})}),document.getElementById("root")),K()},38:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return u}));var r=n(22),a=Object(r.createSlice)({name:"photos",initialState:[{id:91176,categoryId:5,photo:"https://picsum.photos/id/532/300/300",title:"Enim laboris dolore consectetur et fugiat do amet eiusmod anim proident do culpa irure consectetur."},{id:82605,categoryId:1,photo:"https://picsum.photos/id/43/300/300",title:"Ad officia magna veniam sunt."},{id:74760,categoryId:3,photo:"https://picsum.photos/id/722/300/300",title:"Minim anim in sunt esse nisi sit magna consequat in sit laboris adipisicing."},{id:39588,categoryId:5,photo:"https://picsum.photos/id/294/300/300",title:"Deserunt in tempor est id consectetur cupidatat."},{id:72133,categoryId:4,photo:"https://picsum.photos/id/229/300/300",title:"Labore culpa velit sunt sit anim ad do veniam do proident sunt et nisi mollit."},{id:95333,categoryId:1,photo:"https://picsum.photos/id/862/300/300",title:"Fugiat fugiat voluptate tempor minim ipsum nisi culpa magna officia ea deserunt tempor."},{id:62419,categoryId:3,photo:"https://picsum.photos/id/515/300/300",title:"Excepteur nisi aliquip ex aliqua consectetur id laboris cillum elit dolor dolor anim sint."},{id:12569,categoryId:5,photo:"https://picsum.photos/id/730/300/300",title:"Occaecat exercitation Lorem cupidatat adipisicing elit duis consequat esse et tempor eu enim cupidatat."},{id:47434,categoryId:3,photo:"https://picsum.photos/id/287/300/300",title:"Veniam officia est nulla proident labore."},{id:52685,categoryId:3,photo:"https://picsum.photos/id/859/300/300",title:"Ut incididunt do magna culpa consectetur id deserunt et enim elit quis."},{id:69928,categoryId:5,photo:"https://picsum.photos/id/110/300/300",title:"Nisi velit fugiat voluptate fugiat magna officia qui fugiat ad non."},{id:86160,categoryId:5,photo:"https://picsum.photos/id/649/300/300",title:"Id ex enim non dolore reprehenderit eu ullamco."}],reducers:{addPhoto:function(t,e){var n=e.payload;t.push(n)},removePhoto:function(t,e){console.log(e.payload);var n=e.payload;return t.filter((function(t){return t.id!==n}))},updatePhoto:function(t,e){var n=e.payload,r=t.findIndex((function(t){return t.id===n.id}));r>=0&&(t[r]=n)}}}),i=a.reducer,o=a.actions,c=o.addPhoto,s=o.removePhoto,u=o.updatePhoto;e.b=i},54:function(t,e,n){"use strict";n(1);var r=n(4);e.a=function(t){return Object(r.jsx)("div",{children:Object(r.jsx)("h1",{children:" Omg... NotFound "})})}},67:function(t,e,n){}},[[123,1,3]]]);
//# sourceMappingURL=main.c15c83a4.chunk.js.map